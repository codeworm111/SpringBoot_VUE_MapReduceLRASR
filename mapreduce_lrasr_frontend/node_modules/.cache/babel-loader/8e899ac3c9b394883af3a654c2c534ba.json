{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Uploader from './Uploader';\nexport default {\n  name: \"Upload\",\n  data: function data() {\n    return {\n      files: [],\n      up: {},\n      server_config: this.global.server_config,\n      tableData: []\n    };\n  },\n  watch: {\n    files: {\n      handler: function handler() {\n        var _this = this;\n\n        this.tableData = [];\n        this.files.forEach(function (e) {\n          _this.tableData.push({\n            name: e.name,\n            size: e.size,\n            status: e.status,\n            id: e.id,\n            percent: e.percent\n          });\n        });\n      },\n      deep: true\n    }\n  },\n  methods: {\n    inputUploader: function inputUploader(up) {\n      this.up = up;\n      this.files = up.files;\n    },\n    deleteFile: function deleteFile(id) {\n      var file = this.up.getFile(id);\n      this.up.removeFile(file);\n    }\n  },\n  components: {\n    'uploader': Uploader\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;EACAA,cADA;EAEAC,IAFA,kBAEA;IACA;MACAC,SADA;MAEAC,MAFA;MAGAC,wCAHA;MAIAC;IAJA;EAMA,CATA;EAUAC;IACAJ;MACAK,OADA,qBACA;QAAA;;QACA;QACA;UACA;YACAP,YADA;YAEAQ,YAFA;YAGAC,gBAHA;YAIAC,QAJA;YAKAC;UALA;QAOA,CARA;MASA,CAZA;MAaAC;IAbA;EADA,CAVA;EA2BAC;IACAC,aADA,yBACAX,EADA,EACA;MACA;MACA;IACA,CAJA;IAKAY,UALA,sBAKAL,EALA,EAKA;MACA;MACA;IACA;EARA,CA3BA;EAqCAM;IACA;EADA;AArCA","names":["name","data","files","up","server_config","tableData","watch","handler","size","status","id","percent","deep","methods","inputUploader","deleteFile","components"],"sourceRoot":"src/components","sources":["Upload.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <uploader\r\n      ref=\"uploader\"\r\n      browse_button=\"browse_button\"\r\n      :url=\"server_config.url+'/File/'\"\r\n      :filters=\"{prevent_duplicates:true}\"\r\n      @inputUploader=\"inputUploader\"\r\n    />\r\n    <el-button type=\"primary\" id=\"browse_button\">选择多个文件</el-button>\r\n    <br/>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%; margin: 10px 10px;\">\r\n      <el-table-column\r\n        label=\"文件名\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{scope.row.name}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"大小\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{scope.row.size}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"状态\">\r\n        <template slot-scope=\"scope\">\r\n          <span v-if=\"scope.row.status === 1\">准备上传</span>\r\n          <span v-if=\"scope.row.status === 4\" style=\"color: brown\">上传失败</span>\r\n          <span v-if=\"scope.row.status === 5\" style=\"color: chartreuse\">已上传</span>\r\n          <el-progress v-if=\"scope.row.status === 2\" :text-inside=\"true\" :stroke-width=\"20\" :percentage=\"scope.row.percent\"></el-progress>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"danger\" @click=\"deleteFile(scope.row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <br/>\r\n    <el-button type=\"danger\" @click=\"up.start()\">开始上传</el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Uploader from './Uploader'\r\n  export default {\r\n    name: \"Upload\",\r\n    data() {\r\n      return {\r\n        files: [],\r\n        up: {},\r\n        server_config: this.global.server_config,\r\n        tableData: []\r\n      }\r\n    },\r\n    watch: {\r\n      files: {\r\n        handler() {\r\n          this.tableData = [];\r\n          this.files.forEach((e) => {\r\n            this.tableData.push({\r\n              name: e.name,\r\n              size: e.size,\r\n              status: e.status,\r\n              id: e.id,\r\n              percent: e.percent\r\n            });\r\n          });\r\n        },\r\n        deep: true\r\n      }\r\n    },\r\n    methods: {\r\n      inputUploader(up) {\r\n        this.up = up;\r\n        this.files = up.files;\r\n      },\r\n      deleteFile(id) {\r\n        let file = this.up.getFile(id);\r\n        this.up.removeFile(file);\r\n      }\r\n    },\r\n    components: {\r\n      'uploader': Uploader\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}